#!/usr/bin/env bash
#===============================================================================
# Hook: post-templates-apply
# Runs AFTER templates are applied to the vault
#
# Arguments:
#   $1 - Number of files updated
#
# Environment:
#   VAULT_ROOT - Path to the vault
#===============================================================================

FILES_UPDATED="${1:-0}"

echo "[Hook] post-templates-apply: $FILES_UPDATED files updated"

# Example: Regenerate index
# echo "# Customer Index" > "$VAULT_ROOT/Run/_Index.md"
# echo "" >> "$VAULT_ROOT/Run/_Index.md"
# for dir in "$VAULT_ROOT/Run"/CUST-*/; do
#     cust=$(basename "$dir")
#     echo "- [[$cust/$cust-Index|$cust]]" >> "$VAULT_ROOT/Run/_Index.md"
# done

# Example: Notify
# echo "Templates applied to $FILES_UPDATED files" | mail -s "AutoVault Update" admin@example.com

exit 0
