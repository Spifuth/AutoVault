{
  "version": "1.1",
  "description": "AutoVault templates for CUST Run structure",
  "obsidian": {
    "templateFolder": "_templates/run",
    "subFolders": {
      "index": "index",
      "notes": "notes"
    }
  },
  "templates": {
    "index": {
      "root": "---\ntitle: \"{{CUST_CODE}} - RUN\"\ncust_code: \"{{CUST_CODE}}\"\ncreated_utc: \"{{NOW_UTC}}\"\ncreated_local: \"{{NOW_LOCAL}}\"\ntype: \"cust-run-root\"\ntags:\n  - run\n  - cust\n  - \"{{CUST_CODE}}\"\n---\n\n# {{CUST_CODE}} – RUN\n\n> Main RUN hub for **{{CUST_CODE}}**.\n\n---\n\n## 1. Summary\n\n- Current status: `TODO`\n- Environment: `PROD / PREPROD / TEST`  <!-- adjust -->\n- SLA / criticality: `TODO`\n\n---\n\n## 2. Quick navigation\n\n- FP (First pass / routine checks)  \n  `->` [[Run/{{CUST_CODE}}/{{CUST_CODE}}-FP/{{CUST_CODE}}-FP-Index]]\n\n- RAISED (Incidents / tickets raised)  \n  `->` [[Run/{{CUST_CODE}}/{{CUST_CODE}}-RAISED/{{CUST_CODE}}-RAISED-Index]]\n\n- INFORMATIONS (Knowledge and context)  \n  `->` [[Run/{{CUST_CODE}}/{{CUST_CODE}}-INFORMATIONS/{{CUST_CODE}}-INFORMATIONS-Index]]\n\n- DIVERS (Misc / sandbox)  \n  `->` [[Run/{{CUST_CODE}}/{{CUST_CODE}}-DIVERS/{{CUST_CODE}}-DIVERS-Index]]\n\n---\n\n## 3. Service context\n\n### 3.1 Scope\n\n- Included systems / services:\n  - `TODO`\n- Out of scope:\n  - `TODO`\n\n### 3.2 Business impact (short)\n\n- What breaks if this customer is down?\n- Who screams first?\n\n---\n\n## 4. Standard RUN workflow\n\n1. Check FP page for routine checks and known issues.\n2. Check RAISED for open incidents and their status.\n3. Use INFORMATIONS as the KB / context reference.\n4. Park anything weird / unclassified in DIVERS, then triage later.\n\n---\n\n## 5. Open items\n\n- [ ] `TODO`  \n- [ ] `TODO`  \n\n---\n\n## 6. References\n\n- Dashboards:\n  - `TODO`\n- Ticketing / ITSM:\n  - `TODO`\n- External docs:\n  - `TODO`\n",
      "sections": {
        "FP": "---\ntitle: \"{{CUST_CODE}} - FP\"\ncust_code: \"{{CUST_CODE}}\"\nsection: \"FP\"\ncreated_utc: \"{{NOW_UTC}}\"\ncreated_local: \"{{NOW_LOCAL}}\"\ntype: \"cust-run-section\"\ntags:\n  - run\n  - cust\n  - fp\n  - \"{{CUST_CODE}}\"\n---\n\n# {{CUST_CODE}} – FP (First pass checks)\n\n> Routine checks and quick triage items for **{{CUST_CODE}}**.\n\n---\n\n## 1. Daily / shift checklist\n\n- [ ] Monitoring dashboards look healthy\n- [ ] No critical alerts outstanding\n- [ ] Ticket queue reviewed (linked from RAISED)\n- [ ] Scheduled tasks / jobs succeeded\n- [ ] Backup / replication status OK\n\nAdd more items specific to this customer below.\n\n---\n\n## 2. Quick triage patterns\n\n- Symptom: `TODO`  \n  Action: `TODO`  \n\n- Symptom: `TODO`  \n  Action: `TODO`  \n\n---\n\n## 3. Common commands / tools\n\n```bash\n# Add your usual quick commands here\n# (ssh, kubectl, tail logs, etc.)\n```\n",
        "RAISED": "---\ntitle: \"{{CUST_CODE}} - RAISED\"\ncust_code: \"{{CUST_CODE}}\"\nsection: \"RAISED\"\ncreated_utc: \"{{NOW_UTC}}\"\ncreated_local: \"{{NOW_LOCAL}}\"\ntype: \"cust-run-section\"\ntags:\n  - run\n  - cust\n  - raised\n  - incidents\n  - \"{{CUST_CODE}}\"\n---\n\n# {{CUST_CODE}} – RAISED (Incidents / tickets)\n\n> Log of issues raised for **{{CUST_CODE}}** and their status.\n\n---\n\n## 1. Active items\n\n| Date       | Source (Tool/Person) | Priority | Status       | Summary                       | Link / ID |\n| ---------- | -------------------- | -------- | ------------ | ----------------------------- | --------- |\n| `TODO`     | `TODO`               | `P1`     | `Investigating` | `Short description here`   | `#TICKET` |\n\nDuplicate the line above for each active item.\n\n---\n\n## 2. Recently closed\n\n| Date closed | Root cause          | Fix / workaround              | Follow-up action              |\n| ----------- | ------------------- | ----------------------------- | ----------------------------- |\n| `TODO`      | `TODO`              | `TODO`                        | `TODO`                        |\n\n---\n\n## 3. Links\n\n- Ticketing queue for this customer: `TODO`\n- Monitoring alert search: `TODO`",
        "INFORMATIONS": "---\ntitle: \"{{CUST_CODE}} - INFORMATIONS\"\ncust_code: \"{{CUST_CODE}}\"\nsection: \"INFORMATIONS\"\ncreated_utc: \"{{NOW_UTC}}\"\ncreated_local: \"{{NOW_LOCAL}}\"\ntype: \"cust-run-section\"\ntags:\n  - run\n  - cust\n  - information\n  - \"{{CUST_CODE}}\"\n---\n\n# {{CUST_CODE}} – INFORMATIONS (Knowledge / context)\n\n> Static information and context for **{{CUST_CODE}}**.\n\n---\n\n## 1. Contacts\n\n| Role             | Name         | Contact / Channel       | Notes     |\n| ---------------- | ------------ | ----------------------- | --------- |\n| Primary contact  | `TODO`       | `TODO`                  |           |\n| On-call / backup | `TODO`       | `TODO`                  |           |\n\n---\n\n## 2. Environments\n\n| Environment | URL / Entry point          | Notes           |\n| ----------- | -------------------------- | --------------- |\n| PROD        | `TODO`                     |                 |\n| PREPROD     | `TODO`                     |                 |\n| TEST        | `TODO`                     |                 |\n\n---\n\n## 3. Critical services\n\n- Service: `TODO`\n  - Description: `TODO`\n  - Dependencies: `TODO`\n  - Monitoring link: `TODO`\n\n---\n\n## 4. Security / access\n\n> **Do not store secrets directly here.**  \n> Use a password manager / vault and link to entries.\n\n- Identity / SSO: `TODO`\n- Admin consoles: `TODO`\n- Links to secret manager entries: `TODO`\n\n---\n\n## 5. Other notes\n\n- `TODO`\n",
        "DIVERS": "---\ntitle: \"{{CUST_CODE}} - DIVERS\"\ncust_code: \"{{CUST_CODE}}\"\nsection: \"DIVERS\"\ncreated_utc: \"{{NOW_UTC}}\"\ncreated_local: \"{{NOW_LOCAL}}\"\ntype: \"cust-run-section\"\ntags:\n  - run\n  - cust\n  - divers\n  - misc\n  - \"{{CUST_CODE}}\"\n---\n\n# {{CUST_CODE}} – DIVERS (Misc / sandbox)\n\n> Parking zone for anything that doesn’t fit FP / RAISED / INFORMATIONS yet.\n\n---\n\n## 1. Scratchpad\n\n- `TODO`\n- `TODO`\n\n---\n\n## 2. Ideas / improvements\n\n- [ ] `TODO`\n- [ ] `TODO`\n\n---\n\n## 3. To refactor\n\nUse this section to mark items that should eventually be moved to FP, RAISED, or INFORMATIONS.\n\n- `TODO`\n"
      }
    },
    "notes": {
      "FP": "<%*\nconst fullPath = tp.file.path(true);\nconst parts = fullPath.split(\"/\");\nconst custPart = parts.find(p => p.startsWith(\"CUST-\"));\nconst custCode = custPart ?? await tp.system.prompt(\"CUST code (ex: CUST-002)\");\n\nconst alertName = await tp.system.prompt(\"Alert name for this FP?\");\nconst nowUtc    = moment().utc().format();\nconst nowLocal  = moment().format();\n\n// Rename current file: CUST-002-FP - Alert name\nawait tp.file.rename(`${custCode}-FP - ${alertName}`);\n\ntR = `---\ntitle: \"${custCode} - FP - ${alertName}\"\ncust_code: \"${custCode}\"\nsection: \"FP\"\nalert_name: \"${alertName}\"\ncreated_utc: \"${nowUtc}\"\ncreated_local: \"${nowLocal}\"\ntype: \"cust-run-fp-note\"\ntags:\n  - run\n  - cust\n  - fp\n  - \"${custCode}\"\n---\n\n# ${custCode} – FP pattern – ${alertName}\n\n## 1. Context\n\n- **Alert name**: ${alertName}\n- **Source / rule**: \\`TODO\\`\n- **Typical assets**: \\`user / host / IP / app\\`\n- **Environment**: \\`PROD / PREPROD / TEST\\`\n- **Short description**: \\`What the alert is supposed to detect\\`\n\n---\n\n## 2. First-pass triage procedure\n\n1. Check dashboard or panel: \\`TODO\\`\n2. Verify scope (who or what or where): \\`TODO\\`\n3. Search logs around the timestamp: \\`TODO\\`\n4. Check if similar alert already in RAISED: [[Run/${custCode}/${custCode}-RAISED/${custCode}-RAISED-Index]]\n\n---\n\n## 3. False-positive patterns\n\n- **Pattern 1**\n  - Description: \\`TODO\\`\n  - How to recognize: \\`TODO\\`\n  - Decision: \\`TODO\\`\n\n- **Pattern 2**\n  - ...\n\n---\n\n## 4. When to escalate or raise\n\n- Escalate when:\n  - \\`Condition 1\\`\n  - \\`Condition 2\\`\n\nRelated incident notes in RAISED (if any):\n\n- [[Run/${custCode}/${custCode}-RAISED/…]]\n\n---\n\n## 5. Notes or history\n\n- \\`YYYY-MM-DD\\` – \\`TODO\\`\n`;\n%>\n",
      "RAISED": "<%*\nconst fullPath = tp.file.path(true);\nconst parts = fullPath.split(\"/\");\nconst custPart = parts.find(p => p.startsWith(\"CUST-\"));\nconst custCode = custPart ?? await tp.system.prompt(\"CUST code (ex: CUST-002)\");\n\nconst alertName = await tp.system.prompt(\"Alert name for this incident?\");\nconst caseId    = await tp.system.prompt(\"Case / ticket ID?\");\nconst severity  = await tp.system.prompt(\"Severity (Low/Medium/High/Critical)?\", \"Medium\");\n\nconst nowUtc    = moment().utc().format();\nconst nowLocal  = moment().format();\n\n// Rename: CUST-002-RAISED - CASEID - Alert\nawait tp.file.rename(`${custCode}-RAISED - ${caseId} - ${alertName}`);\n\ntR = `---\ntitle: \"${custCode} - Incident - ${alertName} - ${caseId}\"\ncust_code: \"${custCode}\"\nsection: \"RAISED\"\nalert_name: \"${alertName}\"\ncase_id: \"${caseId}\"\nseverity: \"${severity}\"\nstatus: \"New\"\nstarted_utc: \"${nowUtc}\"\nstarted_local: \"${nowLocal}\"\nclosed_utc: \"\"\nclosed_local: \"\"\ntype: \"cust-run-raised-note\"\ntags:\n  - run\n  - cust\n  - raised\n  - incident\n  - \"${custCode}\"\n---\n\n# ${custCode} – Incident – ${alertName} – ${caseId}\n\n## 1. Summary\n\n- **Alert**: ${alertName}\n- **Case / ticket**: ${caseId}\n- **Severity**: ${severity}\n- **Status**: New\n- **Short summary**: \\`TODO\\`\n\n---\n\n## 2. Context\n\n- **Detection source**: \\`Tool / rule / correlation\\`\n- **Environment**: \\`PROD / PREPROD / TEST\\`\n- **Impacted assets**: \\`TODO\\`\n- **Business impact (short)**: \\`TODO\\`\n\nRelated FP pattern notes if any:\n\n- [[Run/${custCode}/${custCode}-FP/…]]\n\n---\n\n## 3. Timeline\n\n- **T0 – Detection**: \\`TODO\\`\n- **T1 – Initial triage**: \\`TODO\\`\n- **T2 – Escalation / communication**: \\`TODO\\`\n- **T3 – Containment / mitigation**: \\`TODO\\`\n- **T4 – Closure**: \\`TODO\\`\n\n---\n\n## 4. Root cause and classification\n\n- **Root cause**: \\`TODO\\`\n- **Final classification**: \\`Benign / True positive / Unknown\\`\n- **Evidence**:\n  - \\`TODO\\`\n\n---\n\n## 5. Lessons learned and follow-up\n\n- [ ] Update FP pattern\n- [ ] Update INFORMATIONS\n- [ ] Detection tuning\n\n---\n\n## 6. Links\n\n- Ticketing: \\`TODO\\`\n- Dashboards: \\`TODO\\`\n- Queries: \\`TODO\\`\n`;\n%>\n",
      "INFORMATIONS": "<%*\nconst fullPath = tp.file.path(true);\nconst parts = fullPath.split(\"/\");\nconst custPart = parts.find(p => p.startsWith(\"CUST-\"));\nconst custCode = custPart ?? await tp.system.prompt(\"CUST code (ex: CUST-002)\");\n\nconst topic   = await tp.system.prompt(\"Information topic name?\");\nconst nowUtc  = moment().utc().format();\nconst nowLocal= moment().format();\n\n// Rename: CUST-002-INFORMATIONS - Topic\nawait tp.file.rename(`${custCode}-INFORMATIONS - ${topic}`);\n\ntR = `---\ntitle: \"${custCode} - Info - ${topic}\"\ncust_code: \"${custCode}\"\nsection: \"INFORMATIONS\"\ntopic: \"${topic}\"\ncreated_utc: \"${nowUtc}\"\ncreated_local: \"${nowLocal}\"\ntype: \"cust-run-info-note\"\ntags:\n  - run\n  - cust\n  - information\n  - \"${custCode}\"\n---\n\n# ${custCode} – Info – ${topic}\n\n## 1. What is this about?\n\nShort description of the topic (service, behavior, quirk, etc.).\n\n---\n\n## 2. Technical details\n\n- Architecture or data flow:\n- Key components:\n- Logs or telemetry:\n\n---\n\n## 3. Impact on detections or alerts\n\n- Noisy patterns:\n- Important signals:\n- Existing rules or alerts:\n\n---\n\n## 4. Operational considerations\n\n- Maintenance windows:\n- Known pain points:\n- Dependencies:\n\n---\n\n## 5. References\n\n- Internal:\n- Customer documentation:\n- Runbooks:\n`;\n%>\n",
      "DIVERS": "<%*\nconst fullPath = tp.file.path(true);\nconst parts = fullPath.split(\"/\");\nconst custPart = parts.find(p => p.startsWith(\"CUST-\"));\nconst custCode = custPart ?? await tp.system.prompt(\"CUST code (ex: CUST-002)\");\n\nconst label   = await tp.system.prompt(\"Short label for this misc note?\");\nconst nowUtc  = moment().utc().format();\nconst nowLocal= moment().format();\n\n// Rename: CUST-002-DIVERS - Label\nawait tp.file.rename(`${custCode}-DIVERS - ${label}`);\n\ntR = `---\ntitle: \"${custCode} - Divers - ${label}\"\ncust_code: \"${custCode}\"\nsection: \"DIVERS\"\nlabel: \"${label}\"\ncreated_utc: \"${nowUtc}\"\ncreated_local: \"${nowLocal}\"\ntype: \"cust-run-divers-note\"\ntags:\n  - run\n  - cust\n  - divers\n  - \"${custCode}\"\n---\n\n# ${custCode} – Divers – ${label}\n\n## 1. Context\n\nWhy this note exists, what you were looking at.\n\n---\n\n## 2. Scratchpad\n\nFree text, commands, and notes.\n\n\\`\\`\\`bash\n# Put commands or queries here if useful\n\\`\\`\\`\n\n---\n\n## 3. To refactor\n\n- [ ] Move part of this to FP\n- [ ] Move part of this to RAISED\n- [ ] Move part of this to INFORMATIONS\n\n---\n\n## 4. Short log of changes\n\n- \\`YYYY-MM-DD\\` – \\`TODO\\`\n`;\n%>\n"
    }
  }
}